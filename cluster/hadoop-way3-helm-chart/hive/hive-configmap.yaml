apiVersion: v1
kind: ConfigMap
metadata:
  name: hive-cfg
  labels:
    app: hive
data:
  core-site.xml: |
    <?xml version="1.0"?>
    <?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
    <configuration>
      <property>
            <name>fs.defaultFS</name>
            <value>jfs://myjfs</value>
        </property>
       <property>
          <name>fs.jfs.impl</name>
          <value>io.juicefs.JuiceFileSystem</value>
      </property>
      <property>
          <name>fs.AbstractFileSystem.jfs.impl</name>
          <value>io.juicefs.JuiceFS</value>
      </property>
      <property>
          <name>juicefs.meta</name>
          <value>mysql://root:bigdata@(10.81.17.8:33066)/juicefs_k8s</value>
      </property>
      <property>
          <name>juicefs.cache-size</name>
          <value>1024</value>
      </property>
      <property>
          <name>juicefs.access-log</name>
          <value>/tmp/juicefs.access.log</value>
      </property>
      <property>
          <name>juicefs.cache-dir</name>
          <value>/tmp/data/juicefs</value>
      </property>

      </configuration>

  hive-site.xml: |
    <?xml version="1.0"?>
    <?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
        <configuration>

          <property><name>hive.metastore.uris</name><value>thrift://hive-metastore-service:9083</value></property>
          <property><name>datanucleus.autoCreateSchema</name><value>false</value></property>
          <property><name>javax.jdo.option.ConnectionURL</name><value>jdbc:mysql://10.81.17.8:33066/hive2_3_9_k8s?createDatabaseIfNotExist=true&amp;useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;rewriteBatchedStatements=true&amp;serverTimezone=Asia/Shanghai</value></property>
          <property><name>javax.jdo.option.ConnectionDriverName</name><value>com.mysql.jdbc.Driver</value></property>
          <property><name>javax.jdo.option.ConnectionPassword</name><value>bigdata</value></property>
          <property><name>javax.jdo.option.ConnectionUserName</name><value>root</value></property>
          <property>
            <name>hive.metastore.warehouse.dir</name>
            <value>/app/hive/warehouse</value>
          </property>
        <property>
            <name>hive.metastore.authorization.storage.checks</name>
            <value>false</value>
        </property>
        
        <property>
            <name>hive.metastore.cache.pinobjtypes</name>
            <value>Table,Database,Type,FieldSchema,Order</value>
        </property>
        
        <property>
            <name>hive.metastore.client.connect.retry.delay</name>
            <value>5s</value>
        </property>
        
        <property>
            <name>hive.metastore.client.socket.timeout</name>
            <value>1800s</value>
        </property>
        
        <property>
            <name>hive.metastore.connect.retries</name>
            <value>24</value>
        </property>
        
        <property>
            <name>hive.metastore.execute.setugi</name>
            <value>true</value>
        </property>
        
        <property>
            <name>hive.metastore.failure.retries</name>
            <value>24</value>
        </property>
        <property>
            <name>hive.metastore.sasl.enabled</name>
            <value>false</value>
        </property>
        
        <property>
            <name>hive.metastore.schema.verification</name>
            <value>false</value>
        </property>
        
        <property>
            <name>hive.metastore.server.max.threads</name>
            <value>100000</value>
        </property>

        </configuration>
      
      
